(function(){"use strict";var t={3368:function(t,s,l){var e=l(6369),i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[t._m(0),s("map-bezier",{staticClass:"mt-4 mb-32",attrs:{title:"Наши города"}})],1)},d=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"container px-4 mx-auto mt-8"},[s("h1",{staticClass:"text"},[t._v("Карта с путями")]),s("div",{staticClass:"text"},[s("p",[t._v("Пути на карте сторятся динамически с использованием модели кривых Безье.")]),s("p",[t._v("vue2, tailwindcss, SCSS, SVG")])])])}],a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"py-9",staticStyle:{background:"linear-gradient(45deg, #c32ae0 14.5%, #2526a9 85.5%)"},attrs:{id:"map"}},[s("div",{staticClass:"container mx-auto mb-16"},[s("h1",{staticClass:"text-white font-extrabold text-2xl md:text-[32px] px-4"},[t._v(" "+t._s(t.title)+" ")]),s("div",{staticClass:"w-full relative hidden md:block"},[s("img",{staticClass:"w-full select-none",attrs:{src:"/images/russia.svg",alt:""}}),s("svg",{staticClass:"absolute left-0 top-0 w-full h-full",attrs:{width:"1300",height:"679",viewBox:"0 0 1300 679",fill:"none",xmlns:"http://www.w3.org/2000/svg",id:"cities1"},on:{click:t.clickMap}},[t.svgItems?s("g",{staticClass:"svg-map",attrs:{id:"svg-map"}},[s("g",{attrs:{mask:"url(#svg-map__mask_total)"},domProps:{innerHTML:t._s(t.svgItems.path)}}),s("g",{domProps:{innerHTML:t._s(t.svgItems.city)}}),s("defs",[s("mask",{attrs:{id:"svg-map__mask_total"}},[s("rect",{attrs:{width:"100%",height:"100%",fill:"white"}}),s("g",{attrs:{fill:"#000",stroke:"#000","stroke-width":"4","stroke-linecap":"round"},domProps:{innerHTML:t._s(t.svgItems.mask)}})])])]):t._e()]),t.city?s("div",{ref:"card",staticClass:"svg-map__popup absolute lg:w-[320px] xl:w-[350px] flex flex-col bg-white rounded-lg left-1/2 top-20 -translate-x-1/2 py-4 px-9 gap-2 shadow-lg",class:{"svg-map__popup_on":t.popupTransition}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"text-pink underline font-bold"},[t._v(t._s(t.city.text))]),s("span",{staticClass:"ml-auto cursor-pointer",attrs:{title:"Закрыть"},on:{click:t.closePopup}},[t._v("✖")])]),t._l(t.cityData,(function(l,e){return s("div",{key:e,staticClass:"flex justify-between"},[s("span",{staticClass:"text-black"},[t._v(" "+t._s(l.name)+" ")]),s("span",{staticClass:"text-white leading-2 rounded-full font-bold px-4 bg-blue"},[t._v(" "+t._s(l.value)+" ")])])})),s("a",{staticClass:"mx-auto",attrs:{href:t.mapLink(t.city.city)}},[s("button",{staticClass:"px-4 py-2 mx-auto bg-blue text-white font-bold rounded-md"},[t._v(" Разместить рекламу ")])])],2):t._e()]),s("div",{staticClass:"grid md:hidden grid-cols-2 gap-2 px-4"},t._l(t.mapCities,(function(l){return s("a",{key:l.city,attrs:{href:t.mapLink(l.city)}},[s("span",{staticClass:"text-xl text-white"},[t._v(" "+t._s(l.text)+" ")])])})),0)])])},n=[],p=l(4806),u=l.n(p),r={props:["title"],data(){return{constructions:null,cities:null,city:null,popupTransition:null}},mounted(){this.constructions=[{city:"Моршанск",pl:6,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Рассказово",pl:4,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Серов",pl:6,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Уварово",pl:6,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Энгельс",pl:36,dpl:0,ss:1,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Ангарск",pl:24,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Кировград",pl:4,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Котовск",pl:2,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Нижняя Тура",pl:8,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Ростов-на-Дону",pl:0,dpl:7,ss:0,dss:0,sb:0,dsb:2,spb:0,dspb:0},{city:"Москва",pl:263,dpl:384,ss:34,dss:38,sb:0,dsb:17,spb:13,dspb:9},{city:"Санкт-Петербург",pl:384,dpl:128,ss:2,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Уфа",pl:289,dpl:22,ss:0,dss:3,sb:0,dsb:0,spb:0,dspb:0},{city:"Воронеж",pl:20,dpl:12,ss:2,dss:0,sb:0,dsb:0,spb:4,dspb:0},{city:"Иркутск",pl:152,dpl:3,ss:0,dss:0,sb:38,dsb:0,spb:2,dspb:0},{city:"Саратов",pl:266,dpl:20,ss:0,dss:0,sb:6,dsb:0,spb:4,dspb:0},{city:"Екатеринбург",pl:100,dpl:54,ss:5,dss:5,sb:67,dsb:15,spb:0,dspb:2},{city:"Красноярск",pl:76,dpl:44,ss:0,dss:0,sb:1,dsb:0,spb:6,dspb:3},{city:"Хабаровск",pl:104,dpl:17,ss:0,dss:0,sb:4,dsb:0,spb:9,dspb:0},{city:"Новосибирск",pl:67,dpl:21,ss:0,dss:2,sb:0,dsb:0,spb:11,dspb:1},{city:"Краснодар",pl:177,dpl:11,ss:8,dss:1,sb:169,dsb:0,spb:6,dspb:1},{city:"Волгоград",pl:190,dpl:12,ss:2,dss:0,sb:7,dsb:0,spb:10,dspb:0},{city:"Челябинск",pl:70,dpl:8,ss:0,dss:0,sb:1,dsb:3,spb:0,dspb:0},{city:"Сочи",pl:26,dpl:7,ss:0,dss:0,sb:42,dsb:18,spb:0,dspb:0},{city:"Нижний Новгород",pl:7,dpl:28,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:14},{city:"Тюмень",pl:42,dpl:7,ss:0,dss:0,sb:3,dsb:5,spb:0,dspb:0},{city:"Барнаул",pl:450,dpl:13,ss:4,dss:0,sb:4,dsb:5,spb:5,dspb:0},{city:"Тамбов",pl:156,dpl:5,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Самара",pl:0,dpl:4,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:2},{city:"Владивосток",pl:142,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:2},{city:"Нижний Тагил",pl:306,dpl:0,ss:0,dss:0,sb:0,dsb:0,spb:0,dspb:0},{city:"Пермь",pl:111,dpl:0,ss:0,dss:0,sb:32,dsb:0,spb:0,dspb:0},{city:"Ставрополь",pl:0,dpl:12,ss:0,dss:0,sb:0,dsb:0,spb:2,dspb:1}],this.cities=[{ru:"Ангарск",createdAt:"2023-02-22T10:32:34.756Z",updatedAt:"2023-04-19T10:31:34.389Z",publishedAt:"2023-02-22T10:32:37.372Z",oid:"161-Ar",x:null,y:null,size:null,align:null},{ru:"Барнаул",createdAt:"2022-08-30T15:58:31.987Z",updatedAt:"2023-04-19T10:31:34.426Z",publishedAt:"2022-08-30T15:58:31.986Z",oid:"L4WS3RCSPRYEBJKCEM1KSOHWIM",x:550,y:580,size:"small",align:null},{ru:"Владивосток",createdAt:"2022-08-30T15:58:36.542Z",updatedAt:"2023-04-19T10:31:34.656Z",publishedAt:"2022-08-30T15:58:36.541Z",oid:"121-Ar",x:1115,y:665,size:null,align:"left"},{ru:"Волгоград",createdAt:"2022-08-30T15:58:26.191Z",updatedAt:"2023-04-19T10:31:34.522Z",publishedAt:"2022-08-30T15:58:26.190Z",oid:"201-Ar",x:150,y:450,size:"small",align:null},{ru:"Воронеж",createdAt:"2022-08-30T15:58:17.170Z",updatedAt:"2023-04-19T10:31:34.482Z",publishedAt:"2022-08-30T15:58:17.168Z",oid:"4-Ar",x:136,y:369,size:null,align:null},{ru:"Екатеринбург",createdAt:"2022-08-30T15:58:20.533Z",updatedAt:"2023-04-19T10:31:34.580Z",publishedAt:"2022-08-30T15:58:20.532Z",oid:"7-Ar",x:360,y:440,size:null,align:null},{ru:"Иркутск",createdAt:"2022-08-30T15:58:18.265Z",updatedAt:"2023-04-19T10:31:34.636Z",publishedAt:"2022-08-30T15:58:18.264Z",oid:"142-Ar",x:762,y:616,size:null,align:"left"},{ru:"Кировград",createdAt:"2023-02-22T10:33:21.282Z",updatedAt:"2023-04-19T10:31:34.399Z",publishedAt:"2023-02-22T10:33:22.534Z",oid:"6600000900000",x:null,y:null,size:null,align:null},{ru:"Котовск",createdAt:"2023-02-22T10:33:42.367Z",updatedAt:"2023-04-19T10:31:34.408Z",publishedAt:"2023-02-22T10:33:43.965Z",oid:"6800000200000",x:null,y:null,size:null,align:null},{ru:"Краснодар",createdAt:"2022-08-30T15:58:25.048Z",updatedAt:"2023-04-19T10:31:34.512Z",publishedAt:"2022-08-30T15:58:25.046Z",oid:"241-Ar",x:55,y:440,size:"small",align:null},{ru:"Красноярск",createdAt:"2022-08-30T15:58:21.695Z",updatedAt:"2023-04-19T10:31:34.626Z",publishedAt:"2022-08-30T15:58:21.694Z",oid:"184-Ar",x:653,y:535,size:null,align:null},{ru:"Моршанск",createdAt:"2023-02-08T08:43:39.211Z",updatedAt:"2023-04-19T10:31:34.338Z",publishedAt:"2023-02-08T08:43:40.349Z",oid:"6800000300000",x:null,y:null,size:null,align:null},{ru:"Москва",createdAt:"2022-08-30T15:58:13.750Z",updatedAt:"2023-04-19T10:31:34.449Z",publishedAt:"2022-08-30T15:58:13.748Z",oid:"MOSCOW",x:180,y:310,size:"big",align:"top"},{ru:"Нижний Новгород",createdAt:"2022-08-30T15:58:29.775Z",updatedAt:"2023-04-19T10:31:34.472Z",publishedAt:"2022-08-30T15:58:29.774Z",oid:"DTNSZS20KCHEDFAFB0KUX3E2BM",x:235,y:350,size:null,align:null},{ru:"Нижний Тагил",createdAt:"2022-08-30T15:58:37.643Z",updatedAt:"2023-04-19T10:31:34.570Z",publishedAt:"2022-08-30T15:58:37.641Z",oid:"IV2DMTIDRPBEHFOV3I5OS5JXQU",x:345,y:410,size:"small",align:null},{ru:"Нижняя Тура",createdAt:"2023-02-22T10:34:07.672Z",updatedAt:"2023-04-19T10:31:34.417Z",publishedAt:"2023-02-22T10:34:11.803Z",oid:"6600001400000",x:null,y:null,size:null,align:null},{ru:"Новосибирск",createdAt:"2022-08-30T15:58:23.958Z",updatedAt:"2023-04-19T10:31:34.616Z",publishedAt:"2022-08-30T15:58:23.957Z",oid:"12-Ar",x:535,y:545,size:null,align:"top"},{ru:"Пермь",createdAt:"2022-08-30T15:58:38.959Z",updatedAt:"2023-04-19T10:31:34.560Z",publishedAt:"2022-08-30T15:58:38.958Z",oid:"6-Ar",x:320,y:390,size:null,align:null},{ru:"Рассказово",createdAt:"2023-02-08T08:44:00.079Z",updatedAt:"2023-04-19T10:31:34.350Z",publishedAt:"2023-02-08T08:44:00.902Z",oid:"6800000700000",x:null,y:null,size:null,align:null},{ru:"Ростов-на-Дону",createdAt:"2023-04-11T09:14:19.940Z",updatedAt:"2023-04-19T10:31:34.492Z",publishedAt:"2023-04-11T09:14:21.950Z",oid:"162-Ar",x:72,y:405,size:null,align:null},{ru:"Самара",createdAt:"2022-08-30T15:58:34.259Z",updatedAt:"2023-04-19T10:31:34.550Z",publishedAt:"2022-08-30T15:58:34.257Z",oid:"2-Ar",x:280,y:430,size:null,align:"left"},{ru:"Санкт-Петербург",createdAt:"2022-08-30T15:58:14.864Z",updatedAt:"2023-04-19T10:31:34.437Z",publishedAt:"2022-08-30T15:58:14.863Z",oid:"0AMQVT3XT3UETHBNGCHGOALSUM",x:193,y:215,size:"big",align:"bottom"},{ru:"Саратов",createdAt:"2022-08-30T15:58:19.428Z",updatedAt:"2023-04-19T10:31:34.502Z",publishedAt:"2022-08-30T15:58:19.427Z",oid:"244-Ar",x:190,y:425,size:"small",align:"left"},{ru:"Серов",createdAt:"2023-02-08T08:44:21.767Z",updatedAt:"2023-04-19T10:31:34.360Z",publishedAt:"2023-02-08T08:44:22.977Z",oid:"163-Ar",x:null,y:null,size:null,align:null},{ru:"Сочи",createdAt:"2022-08-30T15:58:28.378Z",updatedAt:"2023-04-19T10:31:34.531Z",publishedAt:"2022-08-30T15:58:28.376Z",oid:"298-Ar",x:55,y:490,size:"small",align:null},{ru:"Ставрополь",createdAt:"2022-08-30T15:58:39.987Z",updatedAt:"2023-04-19T10:31:34.541Z",publishedAt:"2022-08-30T15:58:39.986Z",oid:"242-Ar",x:115,y:475,size:"small",align:null},{ru:"Тамбов",createdAt:"2022-08-30T15:58:33.093Z",updatedAt:"2023-04-19T10:31:34.462Z",publishedAt:"2022-08-30T15:58:33.092Z",oid:"HE4JQHDE2ATU1HIP0WQJC1431U",x:175,y:335,size:"small",align:"left"},{ru:"Тюмень",createdAt:"2022-08-30T15:58:30.890Z",updatedAt:"2023-04-19T10:31:34.598Z",publishedAt:"2022-08-30T15:58:30.889Z",oid:"10-Ar",x:413,y:461,size:"small",align:null},{ru:"Уварово",createdAt:"2023-02-08T08:44:42.082Z",updatedAt:"2023-04-19T10:31:34.370Z",publishedAt:"2023-02-08T08:44:42.983Z",oid:"6800000800000",x:null,y:null,size:null,align:null},{ru:"Уфа",createdAt:"2022-08-30T15:58:15.987Z",updatedAt:"2023-04-19T10:31:34.589Z",publishedAt:"2022-08-30T15:58:15.986Z",oid:"9-Ar",x:305,y:450,size:null,align:null},{ru:"Хабаровск",createdAt:"2022-08-30T15:58:22.799Z",updatedAt:"2023-04-19T10:31:34.646Z",publishedAt:"2022-08-30T15:58:22.798Z",oid:"182-Ar",x:1110,y:565,size:null,align:"left"},{ru:"Челябинск",createdAt:"2022-08-30T15:58:27.285Z",updatedAt:"2023-04-19T10:31:34.608Z",publishedAt:"2022-08-30T15:58:27.284Z",oid:"143-Ar",x:348,y:475,size:null,align:null},{ru:"Энгельс",createdAt:"2023-02-08T08:45:02.929Z",updatedAt:"2023-04-19T10:31:34.379Z",publishedAt:"2023-02-08T08:45:03.861Z",oid:"YSSFN3ULTPNUZKYVMLHQUPBD3Y",x:null,y:null,size:null,align:null}]},computed:{mapCities(){if(!this.cities||this.cities===[])return null;let t=u().cloneDeep(this.cities);t=t.map((t=>{let s=t.ru;"MOSCOW"===t.oid&&(s="Москва и МО");const l=this.constructions.find((s=>t.ru===s.city));return l?{...t,...l,text:s}:{...t,text:s}}));const s="MOSCOW",l="0AMQVT3XT3UETHBNGCHGOALSUM";return t.sort(((t,e)=>t.oid===s?-1:e.oid===s?1:t.oid===l?-1:e.oid===l?1:0)),t},cityData(){const t=this.city;return[{name:"Digital Билборд 3х6",value:t.dpl},{name:"Digital Суперсайт",value:t.dss},{name:"Digital Ситиборд",value:t.dsb},{name:"Digital Суперборд",value:t.dspb},{name:"Билборд 3х6",value:t.pl},{name:"Суперсайт",value:t.ss},{name:"Ситиборд",value:t.sb},{name:"Суперборд",value:t.spb}].filter((t=>t.value))},citiesSvg(){return this.mapCities?this.mapCities.filter((t=>!!t.x&&!!t.y)):null},svgItems(){if(!this.citiesSvg)return null;let t;const s=this.citiesSvg.reduce(((s,l)=>(t=this.createSvgCity(l),s.city+=t.city,s.path+=t.path,s.mask+=t.mask,s)),{city:"",path:"",mask:""});return s}},watch:{city(t,s){null===t&&null!==s&&this.clearSelected()}},methods:{mapLink(t){return`javascript:alert('Переход на страницу с информацией по городу ${t}');`},closePopup(){this.city=null},createSvgCity({x:t,y:s,text:l,oid:e,size:i,align:d}){const a=(t,s,l,e,i,d)=>{let a,n;return i=i??.5,d?(a=(t+l-i*(e-s))/2,n=(s+e+i*(l-t))/2):(a=(t+l+i*(e-s))/2,n=(s+e-i*(l-t))/2),{x:a,y:n}},n={left:{x:500,y:140},right:{x:800,y:140}},p=n.left.y;let u,r,c=1;const o=(n.right.x+n.left.x)/2,b=t>o;u=b?n.right.x:n.left.x,c=(s-p)/(600-p)+.7*(1-Math.abs(o-t)/o),c<.3&&(c=.3),c>2&&(c=2),r=a(t,s,u,p,c,b);let A,g="";"big"===i||"small"===i?(g="svg-map__text_"+i,A="big"===i?11:5):A=7;let h,m,y="";d?"left"===d?(h=t-A-5,m=s+A-1,y='text-anchor="end"'):"top"===d?(h=t,m=s-A-8,y='text-anchor="middle"'):"bottom"===d&&(h=t,m=s+A+18,y='text-anchor="middle"'):(h=t+A+5,m=s+A-1);let T={};return T.city=`\n            <g data-oid="${e}" class="city svg-map__node">\n            <g class="svg-map__link svg-map--click">\n            <circle class="svg-map__circle svg-map--click" cx="${t}" cy="${s}" r="${A}" fill="currentColor"/>\n            <text class="svg-map__text ${g} svg-map--click" x="${h}" y="${m}" fill="currentColor" ${y}>${l}</text>\n            </g>\n            <defs>\n            <mask id="svg-map__mask_${e}">\n            <path class="svg-map__mask-path" d="M${t} ${s} Q${r.x} ${r.y} ${u},${p}" stroke="#fff" stroke-width="4" />\n            </mask>\n            </defs>\n           </g>\n          `,T.path=`\n            <path class="svg-map__path" d="M${t} ${s} Q${r.x} ${r.y} ${u},${p}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-dasharray="4 6" mask="url(#svg-map__mask_${e})" />\n          `,T.mask=`\n          <circle class="svg-map__circle" cx="${t}" cy="${s}" r="${A}"/>\n          <text class="svg-map__text ${g}" x="${h}" y="${m}" ${y}>${l}</text>\n          `,T},clickMap(t){const s=t.target;if(!s.classList.contains("svg-map--click"))return void(this.city=null);const l=s.closest(".svg-map__node");this.clearSelected(),l.classList.add("svg-map__node_selected");const e=document.getElementById("map");e.scrollIntoView({behavior:"smooth"});const i=l.dataset.oid;this.city&&this.city.oid===i||(setTimeout((()=>{this.city=this.mapCities.find((t=>t.oid===i))}),450),this.popupTransition=!0,setTimeout((()=>{this.popupTransition=!1}),1500))},clearSelected(){document.querySelectorAll("#svg-map .svg-map__node_selected").forEach((t=>t.classList.remove("svg-map__node_selected")))}}},c=r,o=l(1001),b=(0,o.Z)(c,a,n,!1,null,null,null),A=b.exports,g={name:"App",components:{"map-bezier":A}},h=g,m=(0,o.Z)(h,i,d,!1,null,null,null),y=m.exports;e.ZP.config.productionTip=!1,new e.ZP({render:t=>t(y)}).$mount("#app")}},s={};function l(e){var i=s[e];if(void 0!==i)return i.exports;var d=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(d.exports,d,d.exports,l),d.loaded=!0,d.exports}l.m=t,function(){var t=[];l.O=function(s,e,i,d){if(!e){var a=1/0;for(r=0;r<t.length;r++){e=t[r][0],i=t[r][1],d=t[r][2];for(var n=!0,p=0;p<e.length;p++)(!1&d||a>=d)&&Object.keys(l.O).every((function(t){return l.O[t](e[p])}))?e.splice(p--,1):(n=!1,d<a&&(a=d));if(n){t.splice(r--,1);var u=i();void 0!==u&&(s=u)}}return s}d=d||0;for(var r=t.length;r>0&&t[r-1][2]>d;r--)t[r]=t[r-1];t[r]=[e,i,d]}}(),function(){l.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(s,{a:s}),s}}(),function(){l.d=function(t,s){for(var e in s)l.o(s,e)&&!l.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){l.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){l.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};l.O.j=function(s){return 0===t[s]};var s=function(s,e){var i,d,a=e[0],n=e[1],p=e[2],u=0;if(a.some((function(s){return 0!==t[s]}))){for(i in n)l.o(n,i)&&(l.m[i]=n[i]);if(p)var r=p(l)}for(s&&s(e);u<a.length;u++)d=a[u],l.o(t,d)&&t[d]&&t[d][0](),t[d]=0;return l.O(r)},e=self["webpackChunkmap_bezier_vue2"]=self["webpackChunkmap_bezier_vue2"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=l.O(void 0,[998],(function(){return l(3368)}));e=l.O(e)})();
//# sourceMappingURL=app.ae627fce.js.map